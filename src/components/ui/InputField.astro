---
interface Props {
	label: string
	type?: 'text' | 'email'
	id: string
	name?: string
	value?: string
	placeholders?: string[]
	ariaDescribedby?: string
	required?: boolean
	showRequiredIndicator?: boolean
	autocomplete?: string
}

const {
	label,
	type = 'text',
	id,
	name = id,
	value = '',
	placeholders = [],
	ariaDescribedby,
	required = false,
	showRequiredIndicator = true,
	autocomplete,
} = Astro.props

const placeholderText = placeholders[0] ?? ''
const resolvedAutocomplete =
	autocomplete ?? (type === 'email' ? 'email' : 'off')
const labelBaseClass = 'text-medium font-medium text-black/85'
const inputBaseClass =
	'h-12 w-full rounded-[12px] border-2 border-primary/85 bg-white px-4 text-medium text-black outline-none transition-shadow placeholder:text-black/40 focus:border-primary focus:ring-2 focus:ring-primary/25 sm:h-14'
const errorBaseClass = 'mt-1 text-small text-red-600'
---

<div class="flex w-full flex-col gap-2">
	<label for={id} class={labelBaseClass}>
		{label}
		{required && showRequiredIndicator && <span aria-hidden="true">*</span>}
	</label>
	<div class="w-full">
		<input
			type={type}
			id={id}
			name={name}
			value={value}
			required={required}
			autocomplete={resolvedAutocomplete}
			placeholder={placeholderText}
			aria-describedby={ariaDescribedby}
			aria-required={required}
			class={inputBaseClass}
		/>
		{
			ariaDescribedby && (
				<span
					id={ariaDescribedby}
					class={`sr-only ${errorBaseClass}`}
					role="alert"
					aria-live="polite"
					aria-atomic="true"
				/>
			)
		}
	</div>
</div>
