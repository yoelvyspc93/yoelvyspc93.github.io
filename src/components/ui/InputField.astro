---
interface Props {
	label: string
	type?: 'text' | 'email'
	id: string
	value?: string
	placeholders?: string[]
	ariaDescribedby?: string
	required?: boolean
}

const {
	label,
	type = 'text',
	id,
	value = '',
	placeholders = [],
	ariaDescribedby,
	required = false,
} = Astro.props

const placeholderText = placeholders[0] ?? ''
const hidePlaceholder = value.length > 0
---

<div class="flex w-full flex-col gap-2">
	<label for={id} class="text-large text-white">
		{label}
		{required && <span aria-label="required">*</span>}
	</label>
	<div class="relative w-full">
		<input
			type={type}
			id={id}
			name={id}
			value={value}
			required={required}
			autocomplete={type === 'email' ? 'email' : 'off'}
			aria-describedby={ariaDescribedby}
			aria-required={required}
			class="h-[50px] w-full rounded-[20px] border-2 border-transparent bg-white/5 px-4 py-2.5 text-medium text-white outline-none focus-visible:shadow-[0_0_4px_1px_rgba(255,255,255,0.2)] md:h-[60px]"
		/>
		{
			placeholderText && (
				<span
					class={`pointer-events-none absolute left-4 top-1/2 -translate-y-1/2 whitespace-nowrap text-medium text-white/60 ${
						hidePlaceholder ? 'hidden' : ''
					}`}
				>
					{placeholderText}
				</span>
			)
		}
		{
			ariaDescribedby && (
				<span
					id={ariaDescribedby}
					class="sr-only"
					role="alert"
					aria-live="polite"
					aria-atomic="true"></span>
			)
		}
	</div>
</div>
