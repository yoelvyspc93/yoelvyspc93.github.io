---
interface Props {
	label: string
	id: string
	name?: string
	value?: string
	placeholders?: string[]
	ariaDescribedby?: string
	required?: boolean
	showRequiredIndicator?: boolean
}

const {
	label,
	id,
	name = id,
	value = '',
	placeholders = [],
	ariaDescribedby,
	required = false,
	showRequiredIndicator = true,
} = Astro.props

const placeholderText = placeholders[0] ?? ''
const labelBaseClass = 'text-medium font-medium text-black/85'
const textareaBaseClass =
	'min-h-[120px] w-full resize-none rounded-[12px] border-2 border-primary/85 bg-white px-4 py-3 text-medium text-black outline-none transition-shadow placeholder:text-black/40 focus:border-primary focus:ring-2 focus:ring-primary/25 sm:min-h-[140px]'
const errorBaseClass = 'mt-1 text-small text-red-600'
---

<div class="flex w-full flex-col gap-2">
	<label for={id} class={labelBaseClass}>
		{label}
		{required && showRequiredIndicator && <span aria-hidden="true">*</span>}
	</label>
	<div class="w-full">
		<textarea
			id={id}
			name={name}
			required={required}
			placeholder={placeholderText}
			aria-describedby={ariaDescribedby}
			aria-required={required}
			class={textareaBaseClass}
		>{value}</textarea>
		{
			ariaDescribedby && (
				<span
					id={ariaDescribedby}
					class={`sr-only ${errorBaseClass}`}
					role="alert"
					aria-live="polite"
					aria-atomic="true"
				/>
			)
		}
	</div>
</div>
