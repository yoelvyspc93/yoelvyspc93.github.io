---
interface Props {
	label: string
	id: string
	value?: string
	placeholders?: string[]
	ariaDescribedby?: string
	required?: boolean
}

const {
	label,
	id,
	value = '',
	placeholders = [],
	ariaDescribedby,
	required = false,
} = Astro.props

const placeholderText = placeholders[0] ?? ''
const hidePlaceholder = value.length > 0
---

<div class="flex w-full flex-col gap-2">
	<label for={id} class="text-large text-white">
		{label}
		{required && <span aria-label="required">*</span>}
	</label>
	<div class="relative w-full">
		<textarea
			id={id}
			name={id}
			required={required}
			aria-describedby={ariaDescribedby}
			aria-required={required}
			class="min-h-[100px] w-full resize-none rounded-[20px] border-2 border-transparent bg-white/5 px-4 py-2.5 text-medium text-white outline-none focus-visible:shadow-[0_0_4px_1px_rgba(255,255,255,0.2)] md:min-h-[130px]"
		>
			{value}
		</textarea>
		{
			placeholderText && (
				<span
					class={`pointer-events-none absolute left-4 top-3 text-medium text-white/60 ${
						hidePlaceholder ? 'hidden' : ''
					}`}
				>
					{placeholderText}
				</span>
			)
		}
		<span
			id={ariaDescribedby}
			class="sr-only"
			role="alert"
			aria-live="polite"
			aria-atomic="true"></span>
	</div>
</div>
