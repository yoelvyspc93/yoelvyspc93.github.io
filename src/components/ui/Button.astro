---
import type { HTMLAttributes } from 'astro/types'

type ButtonType = 'button' | 'submit' | 'reset'
type Size = 'small' | 'large'
type Variant = 'primary' | 'outlined'

type AnchorAttrs = HTMLAttributes<'a'>
type ButtonAttrs = HTMLAttributes<'button'>

export interface Props {
	children: any

	size?: Size
	variant?: Variant
	class?: string

	href?: string
	external?: boolean
	type?: ButtonType

	attrs?: AnchorAttrs | ButtonAttrs
}

const {
	href,
	external = false,
	type = 'button',
	size = 'large',
	variant = 'primary',
	class: className,
	attrs = {},
} = Astro.props

const base =
	'inline-flex items-center justify-center rounded-full transition-all duration-300 ' +
	'focus:outline-none'

const sizes: Record<Size, string> = {
	small: 'px-6 py-3 text-small',
	large: 'px-8 py-4 text-large font-medium',
}

const variants: Record<Variant, string> = {
	primary:
		'bg-primary text-white shadow-small ' +
		'hover:scale-[1.05] active:scale-[0.95]',
	outlined:
		'bg-white text-black border-2 border-primary shadow-small ' +
		'hover:scale-[1.05] active:scale-[0.95]',
}

const classes = `${base} ${sizes[size]} ${variants[variant]} ${className ?? ''}`
---

{
	href ? (
		<a
			href={href}
			class={classes}
			target={external ? '_blank' : undefined}
			rel={external ? 'noopener noreferrer' : undefined}
			{...(attrs as AnchorAttrs)}
		>
			<slot />
		</a>
	) : (
		<button type={type} class={classes} {...(attrs as ButtonAttrs)}>
			<slot />
		</button>
	)
}
